# Pytanie 9 - Programowalne scalone układy cyfrowe PLD, CPLD oraz FPGA

## Kuba

Układy programowalne to układy scalone, których funkcjonalność nie jest ustalana na etapie produkcji, lecz definiowana przez użytkownika końcowego. Pozwala to na szybkie prototypowanie, testowanie i modyfikację logiki bez konieczności fizycznej zmiany sprzętu.

### Podstawowe pojęcia

- **PLD (Programmable Logic Device)**: Ogólna nazwa układów, których strukturę połączeń można konfigurować.
- **Logika Kombinacyjna**: Stan wyjść zależy wyłącznie od aktualnego stanu wejść (np. proste bramki).
- **Logika Sekwencyjna**: Stan wyjść zależy od aktualnego stanu wejść oraz od stanów poprzednich (wymaga elementów pamięciowych, np. przerzutników).
- **HDL (Hardware Description Language)**: Języki opisu sprzętu (np. VHDL, Verilog) służące do programowania tych układów w sposób behawioralny (opisujemy jak układ ma się zachowywać, a narzędzie syntezy tworzy schemat połączeń).

### Hierarchia i rodzaje układów

#### SPLD (Simple PLD) – Najprostsze układy

Bazują na matrycach bramek AND i OR. Ich budowa pozwala na realizację funkcji logicznych w postaci sumy iloczynów.

- **PAL (Programmable Array Logic)**: Programowalna matryca AND, stała matryca OR. Najpopularniejszy typ SPLD.
- **PLE (Programmable Logic Element)**: Stała matryca AND, programowalna matryca OR.
- **PLA (Programmable Logic Array)**: Obie matryce (AND i OR) są programowalne. Najbardziej elastyczne, ale trudniejsze w produkcji i wolniejsze.

#### CPLD (Complex PLD) – Układy złożone

Koncepcyjnie są to pakiety wielu struktur typu PAL połączonych wspólną matrycą połączeń (Switching Matrix).

**Budowa:**

- Składają się z bloków funkcyjnych i makrokomórek.
- **Makrokomórka**: Zawiera bramki logiczne oraz przerzutnik (pamięć), co pozwala na budowanie zaawansowanych układów sekwencyjnych.

**Cechy:**

- Są nieulotne (pamiętają program po wyłączeniu zasilania).
- Mają przewidywalne czasy opóźnień.

#### FPGA (Field Programmable Gate Array) – Najbardziej zaawansowane

Najpotężniejsze układy programowalne, które nie bazują na sztywnych matrycach bramkowych, lecz na macierzy bloków logicznych.

- **CLB (Configurable Logic Block)**: Podstawowy blok budulcowy zawierający generator funkcji, przerzutnik i multipleksery.
- **LUT (Look-Up Table)**: Zamiast fizycznych bramek, FPGA używa tabel prawdy zapisanych w pamięci RAM. Dla danych wejściowych układ po prostu "sprawdza" w tabeli, jaki powinien być wynik.
- **Zasoby dodatkowe**: FPGA posiadają wbudowane bloki pamięci RAM, sprzętowe mnożniki (DSP) oraz programowalne bloki wejścia/wyjścia (IOB).

**Ulotność:** Większość FPGA bazuje na pamięci SRAM, co oznacza, że po każdym włączeniu zasilania muszą zostać ponownie skonfigurowane (ładowanie programu z zewnętrznej pamięci Flash).

### Układy Programowalne vs Mikrokontrolery (µC)

| Cecha        | Układy PLD/FPGA                       | Mikrokontrolery (µC)                     |
| ------------ | ------------------------------------- | ---------------------------------------- |
| Model pracy  | Równoległy (wszystkie operacje naraz) | Sekwencyjny (instrukcja po instrukcji)   |
| Elastyczność | Projektujemy strukturę sprzętową      | Korzystamy z gotowego zestawu instrukcji |
| Wydajność    | Bardzo wysoka (akceleracja sprzętowa) | Ograniczona taktowaniem procesora        |
| Pobór mocy   | Zazwyczaj większy                     | Zazwyczaj mniejszy                       |

### Zalety i zastosowania

**Zalety:**

- **Reprogramowalność**: Możliwość naprawy błędów lub aktualizacji funkcji bez zmiany płytki PCB.
- **Szybkość wprowadzania na rynek**: Brak konieczności projektowania dedykowanych układów ASIC (które są bardzo drogie w produkcji).
- **Determinizm czasowy**: Brak systemu operacyjnego pozwala na reakcję w czasie rzeczywistym z dokładnością do nanosekund.

**Zastosowania:**

- **Automotive**: Sterowniki silników, systemy bezpieczeństwa (np. ABS, ESP).
- **Telekomunikacja**: Przetwarzanie sygnałów w stacjach bazowych, routery, modemy.
- **Przemysł kosmiczny (NASA)**: Systemy sterowania statkami (odporność na błędy, radia kosmiczne).
- **Akceleratory**: Przetwarzanie grafiki, wideo, dźwięku oraz algorytmy sztucznej inteligencji (np. inferencja sieci neuronowych).
- **Medycyna**: Obrazy medyczne, urządzenia diagnostyczne.
- **Inne**: Prototypowanie ASIC, systemy wbudowane, kryptografia.

### Proces projektowania FPGA (Skrócony)

1. **Projekt**: Stworzenie kodu w języku HDL (np. VHDL lub Verilog) lub schematu.
2. **Synteza**: Zamiana kodu na sieć bramek logicznych.
3. **Implementacja (Mapping & Routing)**: Rozmieszczenie logiki w konkretnych blokach CLB i zaplanowanie połączeń między nimi.
4. **Generowanie Bitstreamu**: Stworzenie pliku binarnego, który konfiguruje układ.
5. **Weryfikacja**: Symulacja i testowanie na sprzęcie.

### Przykład prostego projektu w VHDL dla bramki AND

```vhdl
entity AND_Gate is
    Port ( A : in STD_LOGIC;
           B : in STD_LOGIC;
           Y : out STD_LOGIC);
end AND_Gate;

architecture Behavioral of AND_Gate is
begin
    Y <= A and B;
end Behavioral;
```

Ten kod opisuje prostą bramkę AND, którą można sobie zsyntetyzować na FPGA.

### Podsumowanie na obronie

Układy PLD, CPLD i FPGA umożliwiają elastyczne projektowanie systemów cyfrowych, od prostych SPLD po zaawansowane FPGA. CPLD są idealne dla małych, przewidywalnych aplikacji, podczas gdy FPGA oferują ogromną moc dla złożonych zadań. W porównaniu do mikrokontrolerów, zapewniają równoległość i determinizm, ale wymagają wiedzy z HDL. Zastosowania obejmują niemal wszystkie dziedziny inżynierii, od automotive po AI.

## Stachu

**Programowalne urządzenie logiczne (PLD)** to komponent elektroniczny wykorzystywany do budowy rekonfigurowanych układów cyfrowych. W przeciwieństwie do cyfrowych układów logicznych zbudowanych przy użyciu dyskretnych bramek logicznych o ustalonych funkcjach, funkcja PLD jest niezdefiniowana w momencie produkcji. Zanim PLD może zostać użyty w obwodzie, musi zostać zaprogramowany w celu wdrożenia pożądanej funkcji. W porównaniu do stałych urządzeń logicznych, programowalne urządzenia logiczne upraszczają projektowanie złożonej logiki i mogą oferować lepszą wydajność. W przeciwieństwie do mikroprocesorów, programowanie PLD zmienia połączenia wykonane między bramkami w urządzeniu.
**CPLD (Complex Programmable Logic Device)** to układ programowalny składający się z kilku dużych bloków logicznych połączonych globalną siecią. Jego konfiguracja jest nieulotna, co oznacza, że zachowuje ustawienia po wyłączeniu zasilania. CPLD charakteryzuje się przewidywalnymi i krótkimi czasami propagacji sygnałów, dzięki czemu doskonale sprawdza się w prostych zastosowaniach, takich jak układy sterujące, dekodery, interfejsy czy tzw. logika „klejąca” łącząca różne elementy systemu cyfrowego.
**FPGA (Field Programmable Gate Array)** to znacznie bardziej rozbudowany układ, który składa się z tysięcy małych bloków logicznych (LUT – Look-Up Tables) połączonych konfigurowalną siecią połączeń. W odróżnieniu od CPLD, jego konfiguracja jest zazwyczaj ulotna i musi zostać wczytana po każdym uruchomieniu zasilania. FPGA oferuje ogromną elastyczność i moc obliczeniową, dlatego znajduje zastosowanie w złożonych systemach cyfrowych, przetwarzaniu sygnałów, komunikacji, systemach sterowania czy przy prototypowaniu układów ASIC.
Główną różnicą między CPLD a FPGA jest **skala i przeznaczenie**: CPLD są prostsze, szybsze w inicjalizacji i bardziej przewidywalne, natomiast FPGA pozwalają na realizację znacznie bardziej złożonych funkcji kosztem większej złożoności projektowej, zużycia energii i potrzeby konfiguracji przy starcie.
