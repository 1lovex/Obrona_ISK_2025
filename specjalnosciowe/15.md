# Pytanie 15. Charakterystyka technik wirtualizacji

## Kuba

Wirtualizacja to metodologia polegająca na logicznym dzieleniu zasobów fizycznych komputera (procesora, pamięci, sieci, dysków) na wiele odizolowanych środowisk operacyjnych. Dzięki niej na jednej fizycznej maszynie może działać jednocześnie wiele systemów operacyjnych.

Proces tworzenia wirtualnej (programowej) wersji zasobów komputerowych, takich jak system operacyjny, serwer, pamięć masowa, sieć... zamiast ich fizycznych odpowiedników. Dzięki wirtualizacji **jeden fizyczny komputer może udawać kilka niezależnych maszyn**.

### Obszary wirtualizacji

Współczesna informatyka wykorzystuje wirtualizację na wielu płaszczyznach:

- **Wirtualizacja serwerów:** Umożliwia uruchomienie wielu serwerów wirtualnych na jednej maszynie fizycznej. Pozwala to na pełne wykorzystanie mocy obliczeniowej (zamiast wielu serwerów obciążonych w 10%, mamy jeden obciążony w 80%).
- **Wirtualizacja stacji roboczych (Desktopy):**
  - **Client-Hosted:** Maszyna wirtualna działa obok systemu gospodarza na komputerze użytkownika (np. VirtualBox). Stosowana do testów i zapewnienia zgodności aplikacji.
  - **Server-Based (VDI – Virtual Desktop Infrastructure):** Pulpit użytkownika jest generowany na serwerze w centrum danych, a obraz przesyłany przez sieć do "cienkiego klienta" lub laptopa.
- **Wirtualizacja sieci:**
  - **Zewnętrzna (VLAN):** Logiczny podział sieci fizycznej na segmenty poprzez znakowanie ramek (standard 802.1Q).
  - **Wewnętrzna:** Tworzenie wirtualnych przełączników (vSwitch) i portów wewnątrz hypervisora, łączących maszyny wirtualne między sobą i ze światem zewnętrznym.
- **Chmura Prywatna (Private Cloud):** Wykorzystanie wirtualizacji we własnej firmie w celu świadczenia usług takich jak IaaS (Infrastruktura jako usługa) lub PaaS (Platforma jako usługa).

### Typy wirtualizacji

Kluczowym elementem wirtualizacji jest Hypervisor (Monitor Maszyn Wirtualnych) – oprogramowanie zarządzające zasobami. Wyróżniamy dwie główne techniki:

#### A. Pełna wirtualizacja (Full Virtualization)

System operacyjny "gość" (Guest) nie wie, że jest wirtualizowany i "myśli", że działa na rzeczywistym sprzęcie.

**Mechanizm:** Wszystkie instrukcje jądra gościa są przechwytywane przez hypervisora i emulowane.

**Zalety:** Można uruchomić dowolny, niezmodyfikowany system operacyjny (np. stary Windows na nowym serwerze).

**Wady:** Niższa wydajność z powodu narzutu na emulację. Często wymaga wsparcia sprzętowego procesora (Intel VT-x lub AMD-V).

#### B. Parawirtualizacja

System operacyjny gościa współpracuje z hypervisorem i jest świadomy wirtualizacji.

**Mechanizm:** Jądro systemu gościa musi być zmodyfikowane. Zamiast standardowych odwołań do sprzętu, używa specjalnych instrukcji zwanych Hypercalls (interfejs komunikacji z monitorem).

**Zalety:** Bardzo wysoka wydajność, bliska działaniu natywnemu.

**Wady:** Konieczność modyfikacji jądra systemu (niemożliwe dla systemów o zamkniętym kodzie, jak stare wersje Windows).

### Rodzaje Hypervisorów

#### Typ 1 (Bare-metal)

Działa bezpośrednio na sprzęcie fizycznym (np. VMware ESXi, Microsoft Hyper-V, Xen). Jest systemem operacyjnym samym w sobie, co zapewnia najwyższą wydajność.

#### Typ 2 (Hosted)

Działa jako aplikacja wewnątrz tradycyjnego systemu operacyjnego (np. Oracle VirtualBox, VMware Workstation). Łatwiejszy w obsłudze, ale mniej wydajny.

**Wybrana technika: Hypervisor Typu 2 (Hosted)**

Oprogramowanie wirtualizacyjne jest instalowane jako zwykła aplikacja na istniejącym systemie operacyjnym (np. instalujemy VirtualBox na Windows 10).

**Zasada działania:**

- Hypervisor działa "nad" systemem operacyjnym gospodarza
- Żądania z maszyny wirtualnej do sprzętu (np. zapis na dysku) przechodzą najpierw przez Hypervisor
- Potem przez system gospodarza
- Który dopiero komunikuje się z fizycznym sprzętem

**Przykłady:** Oracle VirtualBox, VMware Workstation

### Kluczowe cechy techniki

#### Izolacja (Piaskownica)

Każda maszyna wirtualna jest **całkowicie odseparowana** od innych oraz od systemu gospodarza.

- Jeśli wirtualny system zostanie zainfekowany wirusem lub ulegnie awarii (Blue Screen), **nie wpływa to na działanie fizycznego komputera**
- Jest to idealne środowisko do testowania nieznanego oprogramowania

#### Abstrakcja sprzętu

System-Gość **"widzi" standardowy, uniwersalny zestaw podzespołów** (wirtualna karta sieciowa, wirtualny dysk), niezależnie od tego, jaki sprzęt fizycznie znajduje się w komputerze.

- Dzięki temu system zainstalowany wirtualnie na komputerze z procesorem Intel zadziała bez problemu po przeniesieniu na komputer z AMD

#### Enkapsulacja

Cała maszyna wirtualna (system, aplikacje, pliki) jest zazwyczaj **zapisana w postaci kilku plików na dysku fizycznym** (np. plik `.vdi` w VirtualBox).

- Pozwala to na łatwe kopiowanie
- Przenoszenie ("Snapshot")
- Backupowanie całych systemów operacyjnych **tak łatwo, jak kopiuje się dokumenty tekstowe**

### Zalety i Wady wirtualizacji

**Zalety:**

- Redukcja kosztów: Mniejsza liczba serwerów fizycznych to mniejsze wydatki na prąd, chłodzenie i miejsce w serwerowni.
- Konsolidacja: Optymalne wykorzystanie dostępnych zasobów sprzętowych.
- Elastyczność: Błyskawiczne tworzenie nowych systemów (z szablonów) oraz łatwe testowanie.
- Wysoka dostępność: Możliwość przenoszenia działającej maszyny wirtualnej między serwerami fizycznymi bez przerywania jej pracy (live migration).

**Wady:**

- Pojedynczy punkt awarii: Awaria jednego mocnego serwera fizycznego powoduje zatrzymanie wszystkich maszyn wirtualnych na nim działających.
- Złożoność: Wymaga wykwalifikowanej kadry i wydajnej infrastruktury sieciowej oraz dyskowej.
- Koszty licencji: Oprogramowanie do zarządzania wirtualizacją często jest kosztowne.

### Dodatkowe aspekty

#### Kontenery vs. Maszyny Wirtualne

- **Kontenery (np. Docker):** Lekka wirtualizacja aplikacji, dzielą jądro systemu gospodarza. Szybsze, mniej zasobów, idealne do mikroserwisów.
- **VM:** Pełne systemy operacyjne, większa izolacja, ale cięższe.

#### Bezpieczeństwo

- Izolacja zmniejsza ryzyko infekcji, ale hypervisor może być celem ataków (np. VM escape).
- Narzędzia: SELinux, AppArmor dla kontenerów.

#### Przykłady narzędzi

- VMware vSphere (Typ 1), KVM (open source), Proxmox.

#### Przyszłość

- Serverless computing, edge virtualization, integracja z AI dla automatycznego skalowania.

### Podsumowanie na obronie

- ✅ **Definicja:** Logiczne dzielenie zasobów na odizolowane środowiska.
- ✅ **Obszary:** Serwery, desktopy (VDI), sieci (VLAN), chmura prywatna.
- ✅ **Typy:** Pełna (emulacja, kompatybilność) vs. Parawirtualizacja (wydajność, modyfikacja jądra).
- ✅ **Hypervisory:** Typ 1 (bare-metal, wydajny) vs. Typ 2 (hosted, łatwy).
- ✅ **Cechy Typu 2:** Izolacja, abstrakcja, enkapsulacja.
- ✅ **Zalety/Wady:** Koszty, elastyczność vs. punkt awarii, złożoność.
- ✅ **Dodatki:** Kontenery (Docker), bezpieczeństwo, trendy (serverless).

Podczas odpowiedzi warto wspomnieć, że wirtualizacja to fundament Cloud Computingu. Kluczową różnicą między typami jest sposób komunikacji z procesorem: pełna wirtualizacja stawia na izolację i kompatybilność, podczas gdy parawirtualizacja stawia na wydajność poprzez współpracę systemu gościa z hypervisorem.

## Stachu

**Wirtualizacja pulpitu** to technologia umożliwiająca uruchamianie i udostępnianie użytkownikom zdalnych środowisk pracy działających na centralnym serwerze lub w chmurze. Użytkownik końcowy nie korzysta bezpośrednio z zasobów swojego komputera, lecz łączy się z wirtualnym pulpitem, który funkcjonuje na serwerze. Połączenie odbywa się przez sieć przy użyciu specjalnych protokołów, takich jak **RDP**, **ICA** lub **PCoIP**. Dzięki temu użytkownik ma dostęp do swojego pulpitu z dowolnego miejsca i urządzenia, zachowując jednocześnie takie samo środowisko pracy.
W praktyce wirtualizacja pulpitu polega na tym, że serwer uruchamia wiele odizolowanych instancji systemów operacyjnych, z których każda jest przypisana do konkretnego użytkownika. Administrator IT zarządza całą infrastrukturą centralnie, co pozwala mu na kontrolę zasobów, wprowadzanie aktualizacji, zarządzanie aplikacjami oraz zapewnianie bezpieczeństwa danych.
Do najpopularniejszych rozwiązań w zakresie wirtualizacji pulpitu należą Citrix Virtual Apps and Desktops, VMware Horizon oraz Microsoft Remote Desktop. Umożliwiają one zarówno tworzenie indywidualnych wirtualnych pulpitów, jak i współdzielonych sesji użytkowników, zapewniając przy tym wysoki poziom bezpieczeństwa i elastyczności zarządzania.

_zajebane z wypracowania do grzybusia <3<3<3<3_

> // obawiam sie, że w zagadanieniu moze raczej chodzic o wybrana przez nich... - K.
