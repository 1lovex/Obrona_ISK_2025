# Pytanie 19. Technologie zapór ogniowych i systemy wykrywania włamań

Technologie zapór ogniowych i systemy wykrywania włamań

## Stachu

- **Technologie kontroli ruchu**

1. Filtrowanie pakietów (bezstanowy)
2. Filtr z badaniem stanów
3. Filtrowanie aplikacyjne
4. Mechanizm NAT
5. Web Application Firewall
6. Email Gateway
7. Proxy
   - Normalne
   - Odwrotne

- **Systemy wykrywania włamań:**

1. Intrusion Detect System (IDS)
   Analizuje ruch sieciowy, działania użytkowników i procesów, wykorzystanie zasobów inne rzeczy. Wykrywa próby ataku i ostrzega o nich. NIE ZAPOBIEGA. Szybki nie musi być. Zadania: monitorowanie, wyktywanie, zapisanie informacji o ataku i powiadomienie admina. Bada sygnatury i/lub analizuje anomalie
   Typy:

- Host based
- Network based
- Hybrid
  Wady:
- Brak przeciwdziała
- Fałszywe alarmy / niewykrycie ataku
- Wąskie gardła szybkich sieci
- Generują wielkie ilości danych do analiz
- Wykwalifikowany personel do obsługi
- Ograniczona obsługa ruchu szyfrowane
- Cena

2. Intrusion Prevention System (IPS)
   Aktywnie przeciwdziała atakom w czasie rzeczywistym – np. poprzez dodawanie reguł zapory ogniowej, rekonfiguracje przełączników, zamykanie sesji, itp. Połączenie firewalla i IDS
   Problemy i wyzwania:

- Bardzo szybkie sieci LAN, MAN
- Środowisko przełączane

3. HoneyPot
   Jest to w pewnym sensie b8. Ma dwa główne cele:

- Cel ochronny
  Zapobieganie, wykrywanie, reakcja
- Cel badawczy
  Gromadzenie informacji o ataku i nowych rodzajach zagrożeń

## Kuba

Ochrona sieci polega na **kontrolowaniu ruchu wchodzącego i wychodzącego**. Dwa główne filary tej ochrony:

- **Zapory Ogniowe (Firewall)** – decydują "kto może wejść"
- **Systemy IDS/IPS** – sprawdzają "co ten ktoś robi, jak już wszedł"

## Technologie Zapór Ogniowych (Firewalls)

Zapora to bariera między zaufaną siecią wewnętrzną a niezaufanym Internetem.

### 1. Filtrowanie Pakietów (Packet Filtering - Stateless)

Najprostsza i najstarsza metoda (warstwa 3 i 4 OSI).

**Działanie:** Decyzje podejmowane są dla każdego pakietu osobno, wyłącznie na podstawie nagłówków:

- Adres IP źródłowy/docelowy
- Numer portu

**Wada:** Nie pamięta kontekstu połączenia. Jeśli haker wyśle pakiet wyglądający jak odpowiedź na zapytanie, prosta zapora może go przepuścić.

### 2. Inspekcja Stanowa (Stateful Inspection)

Standard w większości dzisiejszych routerów.

**Działanie:**

- Zapora monitoruje stan połączenia
- Tworzy tablicę stanów
- Wie, że pakiet przychodzący jest odpowiedzią na pakiet wyjściowy

**Zaleta:** Dużo wyższe bezpieczeństwo niż zwykłe filtrowanie, przy zachowaniu wysokiej wydajności.

### 3. Bramki Aplikacji (Proxy Firewall)

Działa w **warstwie aplikacji (warstwa 7 OSI)**.

**Działanie:**

- Klient nie łączy się bezpośrednio z serwerem w Internecie
- Łączy się z Proxy
- Proxy nawiązuje połączenie w jego imieniu

**Zaleta:** Głęboka analiza treści (np. blokowanie konkretnych komend FTP lub adresów URL), ale jest to rozwiązanie **wolniejsze**.

### 4. NGFW (Next-Generation Firewall)

Współczesny standard korporacyjny. Łączy tradycyjny firewall z funkcjami IDS/IPS i analizą aplikacji.

**Cechy:**

- Rozpoznaje aplikacje (np. "to jest ruch Facebooka", a nie po prostu "ruch na porcie 80")
- Potrafi deszyfrować ruch SSL
- Integruje się z systemami tożsamości użytkowników (Active Directory)

## Systemy Wykrywania i Zapobiegania Włamaniom

Służą do analizy ruchu pod kątem ataków, złośliwego oprogramowania i anomalii.

### IDS (Intrusion Detection System) – "Alarm"

System **pasywny**. Działa jak monitoring wizyjny.

**Rola:**

- Kopiuje ruch sieciowy (port mirroring)
- Analizuje go
- Jeśli wykryje atak, wysyła alert do administratora

**Ważne:** IDS **sam z siebie nie blokuje ataku**, tylko o nim informuje. Nie spowalnia sieci (działa "z boku").

### IPS (Intrusion Prevention System) – "Ochroniarz"

System **aktywny**. Działa "w drucie" (in-line).

**Rola:**

- Ruch sieciowy fizycznie przepływa przez IPS
- Jeśli system wykryje atak, natychmiast **blokuje/odrzuca pakiet**
- Pakiet nie dociera do celu

**Ryzyko:** Jeśli IPS się pomyli (False Positive), może zablokować legalny ruch użytkownika.

## Metody detekcji (Jak one to widzą?)

Zarówno IDS jak i IPS używają **dwóch głównych metod**:

### Sygnaturowa

- Porównywanie pakietów z bazą znanych ataków (podobnie jak antywirus)
- Skuteczne na znane zagrożenia
- Bezradne wobec nowych (Zero-day)

### Anomalna (Behawioralna)

- Uczenie się "normalnego" ruchu w sieci
- Jeśli nagle w nocy księgowość zaczyna wysyłać gigabajty danych na serwer w Chinach, system uzna to za anomalię i zareaguje
- Efektywna wobec nieznanych ataków

## Streszczenie

- ✅ **Zapory (Firewall):**

  - **Stateless:** Proste filtrowanie po IP/Portach
  - **Stateful:** Śledzenie stanu połączenia (najważniejsze!)
  - **Proxy:** Pośrednik w warstwie aplikacji
  - **NGFW:** Rozpoznawanie aplikacji i tożsamości użytkownika

- ✅ **IDS vs IPS:**

  - **IDS (Pasywny):** Tylko alarmuje, nie blokuje
  - **IPS (Aktywny):** Blokuje ruch w czasie rzeczywistym

- ✅ **Metody detekcji:**
  - **Sygnaturowa:** znane ataki
  - **Anomalna:** odchylenia od normy
